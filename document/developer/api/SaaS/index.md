# نرم افزار به عنوان سرویس

در این بسته ابزارهای اولیه و مناسبی برای ارائه نرم‌افزار به عنوان سرویس ارائه شده است که نه تنها مدل‌های داده‌ای مناسب بلکه لایه نمایش اولیه را ایجاد می‌کند.

هر نرم‌افزار نیز با مجموعه‌ای از تنظیم‌ها در رابطه است که ساختار کلی آن را ایجاد می‌کنند. این تنظمی‌ها به نوبه خود دارای سطح بندی هستند و بر اساس نقش افراد قابل دسترسی هستند.

## تنظیم‌ها

مسیر یکن tenant به صورت زیر تعیین می‌شود

	{subdomain}.<domain>
	<domain>/{url prefix}{subdomain}
	
هر spa هم به صورت زیر آدرس دهی می‌شود:

	{subdomain}.<domain>/{spa name}
	<domain>/{url prefix}{subdomain}/{spa-name}


## کنترل‌ها

تمام کنترل‌هایی که برای نرم‌افزارها ارائه می‌شوند باید به صورت پیش فرض با یک نرم‌افزار کار کنند. شناسه نرم‌افزارها به مدل‌های متفاوتی تعیین می‌شود. یکی از این مدلها تعیین شناسه نرم‌افزار در آدرس است. برای نمونه آدرس زیر به صورت پیش فرض تنظیم‌های سیستمی یکی نرم‌افزار را تعیین می‌کند:

	/api/saas/app/1/configByName/system

تعریف این کنترل به صورت زیر است:

    array(
            'regex' => '#^/app/(\d+)/configByName/(.+)$#',
            'base' => $base,
            'model' => 'SaaS_Views_Configuration',
            'method' => 'getByName',
            'http-method' => 'GET',
            'saas' => array(
                'match-application' => 1,      
            ),
    ),

تنظیم زیر تعیین می‌کند که اولین پارامتر در مسیر کنترل تعیین کننده شناسه نرم‌افزار است:

	'match-application' => 1,

به این ترتیب فراخوانی هر یک از پیش شرط‌های معرفی شده در این بسته، نرم‌افزار معادل را (در صورتی که پیش از این تعیین نشده باشد) بارگذاری کرده و در متغیر زیر قرار می‌دهد:

	$request->application

 